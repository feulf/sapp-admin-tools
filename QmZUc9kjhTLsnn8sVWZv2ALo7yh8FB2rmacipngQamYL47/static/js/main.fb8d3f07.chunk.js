(this["webpackJsonpsafe-app-encoding"]=this["webpackJsonpsafe-app-encoding"]||[]).push([[0],{212:function(e,t,n){e.exports=n(452)},217:function(e,t,n){},227:function(e,t){},252:function(e,t){},254:function(e,t){},322:function(e,t){},446:function(e,t,n){},452:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),i=(n(217),n(30)),s=n(497),u=n(52),l=n(53),f=n(200),p=n.n(f),h=function(){function e(){Object(u.a)(this,e),this.sdk=void 0,this.info=void 0,this.sdk=p()([/.*localhost.*/])}return Object(l.a)(e,[{key:"activate",value:function(e){var t=this;this.sdk.addListeners({onSafeInfo:function(n){t.info=n,console.log({info:n}),e({})}})}},{key:"deactivate",value:function(){this.sdk.removeListeners()}},{key:"sendTransactions",value:function(e){this.sdk.sendTransactions(e)}},{key:"isConnected",value:function(){return void 0!==this.info}},{key:"getSafeInfo",value:function(){var e=this.info;if(void 0===e)throw Error("Not connected to a Safe");return e}}]),e}(),d=function(){return new h},m=n(117),v=n.n(m),b=n(15),g=n.n(b),w=n(31),k=n(201),y=n.n(k),E=function(){function e(t){Object(u.a)(this,e),this.safe=void 0,this.safe=t}return Object(l.a)(e,[{key:"loadAbi",value:function(){var e=Object(w.a)(g.a.mark((function e(t){var n,a,r,c,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="rinkeby"===this.safe.getSafeInfo().network?"https://api-rinkeby.etherscan.io":"https://api.etherscan.io",a="".concat(n,"/api?module=contract&action=getabi&address=").concat(t),e.next=4,y.a.get(a);case 4:if("1"===(r=e.sent).data.status){e.next=7;break}throw Error("Request not successfull: ".concat(r.data.message,"; ").concat(r.data.result));case 7:return c=JSON.parse(r.data.result),console.log(c),o=c.filter((function(e){return 0==e.constant})).map((function(e){return{inputs:e.inputs,name:e.name,payable:e.payable||!1}})),e.abrupt("return",{methods:o});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),j=function(){function e(t){Object(u.a)(this,e),this._safe=void 0,this._web3=void 0,this._interfaceRepo=void 0,this._safe=t}return Object(l.a)(e,[{key:"web3",value:function(){return this._web3||(console.log(this._safe.getSafeInfo().network),this._web3=new v.a(new v.a.providers.HttpProvider("https://".concat(this._safe.getSafeInfo().network,".infura.io/v3/8c45ecc4f2e944c7866d974d6dcd52c9")))),this._web3}},{key:"interfaceRepo",value:function(){return this._interfaceRepo||(this._interfaceRepo=new E(this._safe)),this._interfaceRepo}}]),e}(),O=function(e){return new j(e)},x=(n(446),n(500)),S=n(488),C=n(499),_=n(503),T=n(498),I=n(492),R=n(501),F=n(502),A=n(494),D=n(493),N=n(202),W=n.n(N),J=Object(S.a)((function(e){return{heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}}})),L=function(e){var t=e.safe,n=e.services,a=J(),c=r.a.useState(0),o=Object(i.a)(c,2),s=o[0],u=o[1],l=r.a.useState(void 0),f=Object(i.a)(l,2),p=f[0],h=f[1],d=r.a.useState(void 0),m=Object(i.a)(d,2),v=m[0],b=m[1],k=r.a.useState([]),y=Object(i.a)(k,2),E=y[0],j=y[1],O=r.a.useState([]),S=Object(i.a)(O,2),N=S[0],L=S[1],B=r.a.useCallback(function(){var e=Object(w.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(t),e.prev=1,e.next=4,n.interfaceRepo().loadAbi(t);case 4:a=e.sent,console.log(a),b(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),[n]),q=r.a.useCallback(function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v&&!(v.methods.length<=t)){e.next=2;break}return e.abrupt("return");case 2:u(t),console.log(v.methods[t]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v]),z=r.a.useCallback(function(){var e=Object(w.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E[t]=n,j(E.slice());case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[E]),H=r.a.useCallback(Object(w.a)(g.a.mark((function e(){var t,a,r,c,o,i,l,f;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v&&!(v.methods.length<=s)){e.next=2;break}return e.abrupt("return");case 2:for(t=v.methods[s],a=n.web3(),r=[],c=t.name+" (",o=0;o<t.inputs.length;o++)i=E[o]||"",r[o]=i,o>0&&(c+=", "),l=t.inputs[o],c+=(l.name||l.type)+": "+i;c+=")";try{f=a.eth.abi.encodeFunctionCall(t,r),N.push({description:c,raw:{to:p,value:0,data:f}}),j([]),L(N),u(0)}catch(h){console.error(h)}case 9:case"end":return e.stop()}}),e)}))),[n,N,p,v,s,E]),M=r.a.useCallback(function(){var e=Object(w.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=N.slice()).splice(t,1),L(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[N]),P=r.a.useCallback(Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=N.length){e.next=2;break}return e.abrupt("return");case 2:try{t.sendTransactions(N.map((function(e){return e.raw}))),j([]),L([]),u(0)}catch(n){console.error(n)}case 3:case"end":return e.stop()}}),e)}))),[t,N]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null,r.a.createElement(F.a,{expandIcon:r.a.createElement(W.a,null)},r.a.createElement(C.a,{display:"flex",flexDirection:"row-reverse",alignItems:"center",justifyContent:"space-between",width:"100%"},r.a.createElement(I.a,{variant:"contained",color:"primary",onClick:function(){return P()}},"Send"),r.a.createElement(D.a,{className:a.heading},N.length," Transaction(s)"))),r.a.createElement(A.a,null,r.a.createElement(C.a,{flexDirection:"column",width:"100%"},N.map((function(e,t){return r.a.createElement(C.a,{display:"flex",flexDirection:"row-reverse",alignItems:"center",justifyContent:"space-between",width:"100%"},r.a.createElement(I.a,{variant:"contained",color:"secondary",onClick:function(){return M(t)}},"Delete"),r.a.createElement(D.a,null,e.description))}))))),r.a.createElement(x.a,{style:{marginTop:10},value:p,label:"Target",variant:"outlined",onChange:function(e){return B(e.target.value)}}),p&&v?r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{style:{marginTop:10},value:s,onChange:function(e){q(e.target.value)}},v.methods.map((function(e,t){return r.a.createElement(_.a,{value:t},e.name)}))),v.methods.length>s?v.methods[s].inputs.map((function(e,t){return r.a.createElement(x.a,{style:{marginTop:10},value:E[t]||"",label:"".concat(e.name||"","(").concat(e.type,")"),onChange:function(e){return z(t,e.target.value)}})})):r.a.createElement(r.a.Fragment,null),r.a.createElement(I.a,{style:{marginTop:10},variant:"contained",color:"primary",onClick:function(){return H()}},"Add transaction")):r.a.createElement(r.a.Fragment,null))},B=function(){var e=Object(a.useState)(d()),t=Object(i.a)(e,1)[0],n=Object(a.useState)(O(t)),c=Object(i.a)(n,1)[0],o=Object(a.useState)(!1),u=Object(i.a)(o,2),l=u[0],f=u[1];return Object(a.useEffect)((function(){return t.activate((function(){f(t.isConnected())})),function(){return t.deactivate()}}),[t]),r.a.createElement("div",{className:"App"},l?r.a.createElement(L,{safe:t,services:c}):r.a.createElement(r.a.Fragment,null,"Loading...",r.a.createElement("br",null),r.a.createElement(s.a,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[212,1,2]]]);
//# sourceMappingURL=main.fb8d3f07.chunk.js.map